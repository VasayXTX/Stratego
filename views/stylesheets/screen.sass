@import compass
@import blueprint
@import compass_twitter_bootstrap

//For sticky footer
@import compass/layout.scss

//Bluerint grid
$bgrid_width: 50px
$blueprint-grid_columns: 22
$blueprint_grid_width: $bgrid_width
$blueprint_grid_margin: 0px

//Variables

$page_width: 1100px
$header_height: 50px
$footer_height: 25px

$map_cell_size: 40px

$selected_color: #E0E0E0


@mixin input_name
  width: 125px

//Stylesheet

+sticky-footer($footer_height, "#layout", "#layout_footer", "footer")

body
  background-color: white

#layout
  +container
  width: $page_width

#main_container
  $col_count: 18
  +column($col_count)

  header
    +container
    height: $header_height
    width: $col_count * $bgrid_width
    line-height: $header-height
    border-bottom: 1px solid black

    #title
      +column(5)
      vertical-align: middle
      font-weight: 900
      font-size: 2em

    #top_menu
      +column(13)
      height: $header_height
      line-height: $header_height
      font-size: 1.5em

      ul
        +horizontal-list
        margin-top: 10px
        margin-left: 145px
        display: none

        li
          display: block
          width: 100px
          height: $header_height - 20px
          line-height: $header_height - 20px
          text-align: center

          &:first-child
            border-right: 1px solid black

  #content
    +container
    width: $col_count * $bgrid_width
    padding-top: 10px

    > div
      display: none

    #game
      > div
        display: none

#right_panel
  $col_count: 4
  +column($col_count)
  width: $col_count * $bgrid_width - 2px
  border: 
    left: 1px solid black
    right: 1px solid black
    bottom: 1px solid black
  margin-top: 50px

  #btn_game, #btn_game_creation, #btn_available_games
    display: none

  ul
    &.top_menu, &.middle_menu
      display: none

    &.top_menu, &.middle_menu, &.bottom_menu
      list-style-type: none
      padding-left: 0px
      margin-left: 20px

      .btn
        width: 160px

      li
        margin-bottom: 10px

        &:last-child
          margin-bottom: 20px

footer
  border-top: 1px solid black
  width: $page_width
  margin: auto

//---------- Modals ----------

.modal
  display: none

#modal_auth
  width: 350px
  margin-left: -200px

  .modal-body ul
    list-style-type: none
    padding-left: 0px
    margin-left: 15px
    margin: 0px

    li
      &:last-child
        margin-top: 15px

      .input
        .error
          border-color: #EE5F5B

        .msg-error
          margin-left: 15px
          color: #B94A48

  .modal-footer ul
    +horizontal-list
    +float-right

    li
      margin-left: 5px

//---------- Users online ----------

#users_online
  ol
    font-size: 1.3em

    li
      margin-top: 10px


//---------- Map ----------
@mixin map
  $col_count: 14
  width: ($col_count - 2) * $bgrid_width
  height: ($col_count - 2) * $bgrid_width
  padding: 20px $bgrid_width
  
  .map
    overflow: auto
    .map_cell
      display: block
      width: $map_cell_size
      height: $map_cell_size

    table
      width: auto
      margin: auto

      tr
        height: $map_cell_size

        td
          padding: 0px
          width: $map_cell_size
          border: 1px solid black

.map_cell
  background-color: white

  &.pl1
    background-color: red
    @each $f in Flag, Spy, Scout, Miner, Sergeant, Captain, Major, Colonel, General, Marshal, Bomb, Lieutenant
      &.img_unit_#{$f}
        background-image: image-url("/images/#{$f}.png")
        background-repeat: no-repeat
        background-color: white

  &.pl2
    background-color: blue

  &.obst
    background-color: gray


//---------- Army ----------

@mixin army
  ul
    $col_count: 4
    +column($col_count)
    list-style-type: none
    padding: 0px
    margin: 0px

    li
      +container
      width: $col_count * $bgrid_width
      vertical-align: middle
      margin-bottom: 10px
      &:last-child
        margin-bottom: 0px

      span
        height: $map_cell_size
        text-align: center
        line-height: $map_cell_size
        text-size: 1.1em

        &:first-child
          +column(1)
          display: block
          width: $map_cell_size - 2px
          height: $map_cell_size - 2px
          border: 1px solid black
          @each $f in Flag, Spy, Scout, Miner, Sergeant, Captain, Major, Colonel, General, Marshal, Bomb, Lieutenant
            &.img_unit_#{$f}
              background-image: image-url("/images/#{$f}.png")
              background-repeat: no-repeat

        &.unit_name
          $col_count: 2
          $mrg_left: 10px
          +column($col_count)
          width: $col_count * $bgrid_width - $mrg_left
          margin-left: $mrg_left

        &.unit_count
          +column(1)

@mixin army_place
  $col_count: 14
  +container
  width: ($col_count - 2) * $bgrid_width
  padding: 20px $bgrid_width

  .army
    margin: auto
    +army

//---------- List of <resource> ----------

@mixin list_resources($col_count)
  width: $col_count * $bgrid_width - 11px
  border:
    top: 1px solid black
    bottom: 1px solid black
    right: 1px solid black
  padding:
    right: 10px

  ol
    font-size: 1.3em

    li
      margin-top: 10px
      text-align: center
      cursor: pointer

      &.selected, &:hover
        background-color: $selected_color


//---------- Maps editor ----------

#maps_editor
  $col_count: 18
  $top_side_height: 50px
  +container
  width: $col_count * $bgrid_width

  .left_side
    $col_count: 4
    +column($col_count)

    .top_side
      +container
      width: $col_count * $bgrid_width - 1px
      border-right: 1px solid black
      height: $top_side_height

      .btn
        width: 50px
        height: 40px

      ul
        +horizontal-list

        li
          margin-right: 10px

    .list_maps
      +list_resources($col_count)

    .tools
      width: inherit

      .map_cell
        display: block
        width: $map_cell_size - 2px
        height: $map_cell_size - 2px
        border: 1px solid black

      ul
        list-style-type: none
        margin: 0px
        width: inherit

        li
          margin-top: 10px
          cursor: pointer
          display: block
          width: inherit

          &:hover, &.selected
            background-color: $selected_color

  .right_side
    $col_count: 14
    +column($col_count)

    .top_side
      width: $col_count * $bgrid_width - 20px
      height: $top_side_height
      border-bottom: 1px solid black

      .params
        padding-left: 110px

        #name_map
          +input_name

        #width_map, #height_map
          width: 50px

        input, button
          margin:
            left: 10px
            top: 6px

    .map_place
      +map

//---------- Creation of the game ----------

#game_creation
  $col_count: 18
  $top_side_height: 50px
  +container
  width: $col_count * $bgrid_width

  .army_panel, .map_panel
    .left_side
      $col_count: 4
      +column($col_count)

      .top_side
        +container
        width: $col_count * $bgrid_width - 1px
        border-right: 1px solid black
        height: $top_side_height
        text-align: center

      .list_maps, .list_armies
        +list_resources($col_count)

    .right_side
      $col_count: 14
      +column($col_count)

      .top_side
        width: $col_count * $bgrid_width - 20px
        height: $top_side_height
        border-bottom: 1px solid black

      .map_place
        +map

  .army_panel
    .top_side
      .params_game
        float: right
        margin-top: 6px
        .name_game
          +input_name

    .right_side
      height: 300px

      .army_place
        +army_place

//---------- Created game ----------

#game_created
  $col_count: 18
  $top_side_height: 50px
  +container
  width: $col_count * $bgrid_width

  .left_side
    $col_count: 4
    +column($col_count)

    .top_side
      display: block
      width: $col_count * $bgrid_width - 1px
      height: $top_side_height

  .right_side
    $col_count: 14
    +column($col_count)

    .top_side
      width: $col_count * $bgrid_width - 20px
      height: $top_side_height
      border-bottom: 1px solid black

    .map_place
      +map

    .army_place
      +army_place

    .army_panel
      height: 300px

//---------- AvailableGames ----------

#available_games
  $col_count: 18
  $top_side_height: 50px
  +container
  width: $col_count * $bgrid_width

  .left_side
    $col_count: 4
    +column($col_count)

    .top_side
      display: block
      width: $col_count * $bgrid_width - 1px
      height: $top_side_height

    .list_games
      +list_resources($col_count)

  .right_side
    $col_count: 14
    +column($col_count)

    .top_side
      width: $col_count * $bgrid_width - 20px
      height: $top_side_height
      border-bottom: 1px solid black

    .map_place
      +map

    .army_place
      +army_place

    .army_panel
      height: 300px

//---------- GamePlacement ----------

#game_placement
  $col_count: 18
  $top_side_height: 50px
  +container
  width: $col_count * $bgrid_width

  .left_side
    $col_count: 4
    +column($col_count)

    .top_side
      display: block
      width: $col_count * $bgrid_width - 1px
      height: $top_side_height
      border-bottom: 1px solid black
      border-right: 1px solid black

    .army
      +army
      ul
        $w: 4 * $bgrid_width - 1px
        border-right: 1px solid black
        width: $w

        li
          width: $w
          &:first-child
            margin-top: 10px
          &:hover
            background-color: $selected_color
            cursor: pointer
          &.selected
            background-color: $selected_color

  .right_side
    $col_count: 14
    +column($col_count)

    .top_side
      width: $col_count * $bgrid_width - 20px
      height: $top_side_height
      border-bottom: 1px solid black

      > div
        height: $top_side_height - 6px
        margin-top: 6px

      .left_side
        +column(10)

      .right_side
        $col_count: 4
        +column($col_count)
        width: $col_count * $bgrid_width - 20px

        .btn_leave_game
          float: right

    .map_place
      +map

